services:
  microbin:
    image: danielszabo99/microbin:latest
    hostname: microbin
    container_name: microbin
    networks:
    - traefik_network
    security_opt:
    - no-new-privileges:false
    healthcheck:
      test: timeout 10s bash -c ':> /dev/tcp/127.0.0.1/8080' || exit 1
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 90s
    environment:
      MICROBIN_ADMIN_USERNAME: admin
      MICROBIN_ADMIN_PASSWORD: ${ADMIN_PASSWORD}
      MICROBIN_PUBLIC_PATH: http://microbin.${DOMAINNAME}/
    restart: unless-stopped
    volumes:
    - ${APPDATA_DIR}/microbin:/app/microbin_data:rw
    labels:
    - traefik.enable=true
    - traefik.http.routers.microbin.rule=Host(`microbin.${DOMAINNAME}`)
    - traefik.http.services.microbin.loadbalancer.server.port=8080
    - homepage.name=Microbin
    - homepage.group=Pastebins
    - homepage.icon=microbin
    - homepage.description=Paste Service
    - homepage.href=https://microbin.${DOMAINNAME}/
    - sablier.enable=true
    - sablier.group=microbin
    - sablier-station.duration=15m
    - sablier-station.primary=true
